// VCommandPalette.sass

// Variables (can be themed)
$v-command-palette-search-height: 48px !default;
$v-command-palette-background-color: rgb(var(--v-theme-surface)) !default;
$v-command-palette-border-radius: 8px !default; // Match VDialog or common overlay radius
$v-command-palette-box-shadow: var(--v-shadow-elevation-8, inherit) !default; // Use Vuetify elevation shadow
$v-command-palette-list-padding: 8px 0 !default;
$v-command-palette-item-selected-background-color: rgba(var(--v-theme-primary), 0.1) !default;

// Custom variables for compact styling
$v-command-palette-input-padding-y: 6px !default;
$v-command-palette-dense-list-item-height: 40px !default;
$v-command-palette-compact-list-item-height: 32px !default;

// Main component container
.v-command-palette {
  background-color: $v-command-palette-background-color;
  border-radius: $v-command-palette-border-radius;
  // box-shadow: $v-command-palette-box-shadow; // VDialog itself has elevation/shadow
  display: flex;
  flex-direction: column;
  overflow: hidden; // Ensure contents fit within rounded corners
  max-height: 70vh; // Prevent palette from becoming too tall

  &__top {
    padding: .5rem .875rem;
    border-bottom: 1px solid rgba(var(--v-border-color), var(--v-border-opacity));
  }

  &__header {
    .v-btn {
      margin-right: .875rem;
      .v-icon {
        opacity: var(--v-medium-emphasis-opacity);
      }
    }
    .v-command-palette__title {
      display: inline-block;
      align-items: center;
      border: 1px solid rgba(var(--v-border-color), var(--v-border-opacity));
      border-radius: 4px;
      padding: 4px 8px;
      font-size: .825rem;
    }
  }

  // Search container - leverage Vuetify's classes
  &__search {
    margin-left: -.875rem;
    // Use component-level modifier instead of deep selector chains
    &--compact {
      .v-field {
        &__input {
          padding-top: $v-command-palette-input-padding-y;
          padding-bottom: $v-command-palette-input-padding-y;
        }
      }
    }
  }

  // Loader area
  &__loader {
    width: 100%;
  }

  // List container
  &__list {
    &.v-list {
      padding: 0;
    }
    flex: 1 1 auto; // Allow list to grow and shrink
    overflow-y: auto; // Make list scrollable if actions exceed max-height
    margin: .5rem;
  }

  // Item style customizations - use BEM pattern
  &__item {
    // Define variants at the component level
    &--selected,
    &.v-list-item--active {
      background-color: $v-command-palette-item-selected-background-color;
      color: rgb(var(--v-theme-primary));

      // Target direct children without deep nesting
      > .v-list-item__content .v-icon,
      > .v-list-item__append .v-hot-key .v-hot-key__key {
        color: inherit;
      }
    }

    // Density modifiers at component level
    &--dense {
      min-height: $v-command-palette-dense-list-item-height;

      .v-list-item-title {
        font-size: 0.875rem;
      }
    }

    &--compact {
      min-height: $v-command-palette-compact-list-item-height;

      .v-list-item-title {
        font-size: 0.8125rem;
      }
    }
  }

  &__no-results {
    // Style for the "No results found" message
    color: rgba(var(--v-theme-on-surface), var(--v-medium-emphasis-opacity));
    font-style: italic;
    text-align: center;
    padding: 12px;
  }
}
